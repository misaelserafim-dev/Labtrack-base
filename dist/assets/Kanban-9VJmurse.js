import{aK as w,c as m,b as t,F as h,z as b,A as c,f as g,w as y,aJ as T,aL as C,x as _,as as v,u as F,o as u,n as D,t as x}from"./index-DOn1KI8q.js";const M={data(){return{tasks:{para_fazer:[{title:"Criar layout",description:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Praesent felis felis, gravida eget dolor tempor, luctus pulvinar sapien. Donec fermentum imperdiet eros quis cursus. Vivamus viverra ornare orci a sodales. In ultrices ligula in tortor sagittis, non mattis diam tincidunt. Nam sed blandit sapien. Etiam sed facilisis magna. Fusce dignissim est vel nibh tempus auctor. Praesent tortor purus, tincidunt nec quam quis, porta tincidunt nulla. Duis placerat augue sapien, id cursus ex pulvinar non. Donec mi sapien, dignissim sed semper sed, laoreet eget velit. Praesent mollis at neque vitae ultricies. Donec tempus ultricies fringilla. Phasellus euismod ac lorem vitae tristique. Vivamus faucibus rhoncus facilisis.",date:"20/02/2025",priority:"Alta",comments:[],images:[]}],andamento:[{title:"Integrar API",description:"Conectar frontend ao backend",date:"05/03/2025",priority:"Média",comments:[],images:[]}],aprovacao:[{title:"Revisar responsividade",description:"Testar para dispositivos móveis",date:"26/02/2025",priority:"Média",comments:[],images:[]}],validado:[],impedimento:[]},draggedTask:null,draggedFromColumn:null,draggedFromIndex:null,selectedTask:null,newComment:"",menuOpen:!1,menuOpenComments:!1,expandedImage:null}},computed:{formatDate(){if(!this.selectedTask||!this.selectedTask.date)return"";const s=this.selectedTask.date.split("/");return`${s[2]}-${s[1]}-${s[0]}`}},methods:{addTask(s){const e={title:"Nova Tarefa",description:"Descrição breve...",date:new Date().toLocaleDateString(),priority:"",comments:[],images:[]};this.tasks[s].push(e)},onDragStart(s,e,l){this.draggedTask=s,this.draggedFromColumn=e,this.draggedFromIndex=l},onDragEnter(s,e){if(this.draggedFromColumn===s&&this.draggedFromIndex!==e){const l=this.tasks[s],d=l.splice(this.draggedFromIndex,1)[0];l.splice(e,0,d),this.draggedFromIndex=e}},onDropTask(s,e){if(!this.draggedTask)return;const l={...this.draggedTask};this.draggedFromColumn!==s&&(this.tasks[this.draggedFromColumn].splice(this.draggedFromIndex,1),this.tasks[s].splice(e,0,l)),this.draggedTask=null,this.draggedFromColumn=null,this.draggedFromIndex=null},updateDate(s){if(this.selectedTask){const e=s.split("-");this.$set(this.selectedTask,"date",`${e[2]}/${e[1]}/${e[0]}`)}},priorityClass(s){switch(s){case"Alta":return"bg-red-300 text-red-700 px-2 py-1 rounded";case"Média":return"bg-yellow-200 text-yellow-700 px-2 py-1 rounded";case"Baixa":return"bg-green-200 text-green-700 px-2 py-1 rounded";default:return""}},columnClass(s){return{para_fazer:"t-fazer",andamento:"t-andamento",aprovacao:"t-aprovacao",validado:"t-validado",impedimento:"t-impedimento"}[s]},columnTitle(s){return{para_fazer:"Para fazer",andamento:"Em andamento",aprovacao:"Em aprovação",validado:"Validado",impedimento:"Impedimento"}[s]},toggleMenu(){this.menuOpen=!this.menuOpen},deleteTask(){confirm("Tem certeza que deseja excluir esta tarefa?")&&(this.selectedTask=null,this.menuOpen=!1)},openTaskModal(s){this.selectedTask=s},closeTaskModal(){this.selectedTask=null,this.newComment=""},toggleMenuComments(s){this.menuOpenComments===s?this.menuOpenComments=null:this.menuOpenComments=s},FileUploadAnexo(s){const e=s.target.files[0];if(e&&["image/png","image/jpeg","application/pdf"].includes(e.type)){const d=new FileReader;d.onload=i=>{this.selectedTask.images.push(i.target.result)},d.readAsDataURL(e)}else alert("Formato de arquivo não suportado.")},getFormatDate(){const s=new Date,e=new Date,l=e.getHours().toString().padStart(2,"0"),d=e.getMinutes().toString().padStart(2,"0"),i=e.getDate(),a=e.getMonth(),p=e.getFullYear(),o=s.getDate(),n=s.getMonth(),r=s.getFullYear();return i===o&&a===n&&p===r?`Hoje às ${l}:${d}`:i===o-1&&a===n&&p===r?`Ontem às ${l}:${d}`:`Em ${`${i.toString().padStart(2,"0")}/${(a+1).toString().padStart(2,"0")}/${p}`} às ${l}:${d}`},AddFileUploadComment(s){const e=s.target.files[0];if(e&&["image/png","image/jpeg","application/pdf"].includes(e.type)){const d=new FileReader;d.onload=i=>{const a=i.target.result;this.selectedTask.comments.push({user:"Misael Serafim",avatar:"https://ui-avatars.com/api/?name=Mi",text:`Novo arquivo anexado: ${e.name}`,timestamp:this.getFormatDate(),fileUrl:a}),s.target.value=null},d.readAsDataURL(e)}else alert("Formato de arquivo não suportado.")}}},I={class:"p-4"},A={class:"flex gap-4"},S=["onDrop"],z={class:"flex justify-between items-center mb-4"},q=["onClick"],O=["onDrop"],U=["onDragstart","onDragenter","onDrop","onClick"],V={class:"flex flex-col"},j={class:"text-md font-bold mb-2"},E={class:"flex items-center text-sm text-gray-500 mt-1 ml-3"},N={class:"mt-2 flex items-center ml-3"},P={key:0,class:"modal fixed inset-0 bg-gray-500 bg-opacity-75 flex justify-center items-center z-50"},B={class:"modal-content bg-white w-full max-w-3xl rounded-lg relative"},L={class:"modal-body flex flex-col md:flex-row"},R={class:"relative task-info w-full md:w-1/2 p-6"},Y={class:"absolute right-2 top-4 flex justify-end p-2"},H={key:0,class:"absolute right-2 top-10 bg-white shadow-md rounded-md w-40 z-50"},K={class:"py-2"},J={class:"font-bold text-2xl mb-4"},G={class:"itens-task-information"},Q=["value"],W={class:"mb-4"},X={class:"mb-4"},Z={class:"image-container mt-2"},$={for:"upload_files"},ee={key:0,class:"previes-upload-itens flex flex-wrap gap-2"},te=["src","onClick"],se={class:"card-right w-full md:w-1/2 p-6 border-l mt-4 md:mt-0"},ae={class:"scroll-modal-item"},oe={class:"relative"},ie=["src"];function ne(s,e,l,d,i,a){const p=F("Commentario");return u(),m("div",I,[t("div",A,[(u(!0),m(h,null,b(i.tasks,(o,n)=>(u(),m("div",{key:n,class:"card-kanban w-full max-w-xs bg-white p-3 rounded-lg shadow-md flex-shrink-0",onDragover:e[2]||(e[2]=v(()=>{},["prevent"])),onDrop:r=>a.onDropTask(n,0)},[t("div",z,[t("h3",{class:D([a.columnClass(n),"font-semibold text-lg text-white"])},x(a.columnTitle(n)),3),t("button",{onClick:r=>a.addTask(n),class:"px-4 py-2 rounded flex items-center"},e[13]||(e[13]=[t("i",{class:"pi pi-plus mr-2"},null,-1),c(" Nova Tarefa ")]),8,q)]),o.length===0?(u(),m("div",{key:0,class:"empty-dropzone p-4 border-dashed border-2 border-gray-300 rounded-lg text-center text-gray-500",onDragover:e[0]||(e[0]=v(()=>{},["prevent"])),onDrop:r=>a.onDropTask(n,0)}," Arraste uma tarefa aqui ",40,O)):g("",!0),(u(!0),m(h,null,b(o,(r,f)=>(u(),m("div",{key:r.title,class:"p-4 border mb-2 rounded-lg cursor-pointer bg-[#f8fbfd]",draggable:"true",onDragstart:k=>a.onDragStart(r,n,f),onDragover:e[1]||(e[1]=v(()=>{},["prevent"])),onDragenter:k=>a.onDragEnter(n,f),onDrop:k=>a.onDropTask(n,f),onClick:k=>a.openTaskModal(r)},[t("div",V,[t("span",j,x(r.title),1),t("div",E,[e[14]||(e[14]=t("i",{class:"pi pi-calendar mr-2"},null,-1)),t("span",null,x(r.date),1)]),t("div",N,[e[15]||(e[15]=t("i",{class:"pi pi-flag mr-2"},null,-1)),t("span",{class:D([a.priorityClass(r.priority),"text-xs font-semibold"])},x(r.priority),3)])])],40,U))),128))],40,S))),128))]),i.selectedTask?(u(),m("div",P,[t("div",B,[t("span",{class:"close absolute top-2 right-2 text-2xl cursor-pointer",onClick:e[3]||(e[3]=(...o)=>a.closeTaskModal&&a.closeTaskModal(...o))},"×"),t("div",L,[t("div",R,[t("div",Y,[t("i",{class:"pi pi-ellipsis-v cursor-pointer text-xl",onClick:e[4]||(e[4]=(...o)=>a.toggleMenu&&a.toggleMenu(...o))}),i.menuOpen?(u(),m("div",H,[t("ul",K,[t("li",{class:"px-4 py-2 cursor-pointer hover:bg-gray-200",onClick:e[5]||(e[5]=(...o)=>a.deleteTask&&a.deleteTask(...o))},e[16]||(e[16]=[t("i",{class:"pi pi-trash"},null,-1),c(" Excluir Tarefa")]))])])):g("",!0)]),t("h2",J,[y(t("input",{type:"text","onUpdate:modelValue":e[6]||(e[6]=o=>i.selectedTask.title=o),class:"rounded w-full"},null,512),[[T,i.selectedTask.title]])]),t("div",G,[t("p",null,[e[17]||(e[17]=t("strong",null,[t("i",{class:"pi pi-calendar mr-2"}),c(" Data:")],-1)),t("input",{type:"date",value:a.formatDate,onInput:e[7]||(e[7]=o=>a.updateDate(o.target.value)),class:"border p-2 rounded text-sm"},null,40,Q)]),t("p",null,[e[19]||(e[19]=t("strong",null,[t("i",{class:"pi pi-flag mr-2"}),c(" Prioridade:")],-1)),y(t("select",{"onUpdate:modelValue":e[8]||(e[8]=o=>i.selectedTask.priority=o),class:"border p-2 rounded text-sm"},e[18]||(e[18]=[t("option",{value:"Alta"},"Alta",-1),t("option",{value:"Média"},"Média",-1),t("option",{value:"Baixa"},"Baixa",-1)]),512),[[C,i.selectedTask.priority]])]),e[20]||(e[20]=t("p",{class:"mt-4"},[t("strong",null,[t("i",{class:"pi pi-file mr-2"}),c(" Descrição:")])],-1))]),t("div",W,[y(t("textarea",{"onUpdate:modelValue":e[9]||(e[9]=o=>i.selectedTask.description=o),class:"description-task border p-2 rounded w-full h-40",placeholder:"Descrição da tarefa..."},null,512),[[T,i.selectedTask.description]])]),t("div",X,[e[22]||(e[22]=t("h3",{class:"font-bold mb-2"},"Anexos",-1)),t("div",Z,[t("label",$,[e[21]||(e[21]=t("i",{class:"pi pi-upload mr-2"},null,-1)),t("input",{id:"upload_files",type:"file",accept:"image/*",onChange:e[10]||(e[10]=(...o)=>a.FileUploadAnexo&&a.FileUploadAnexo(...o)),class:"mt-2"},null,32)]),i.selectedTask.images.length?(u(),m("div",ee,[(u(!0),m(h,null,b(i.selectedTask.images,(o,n)=>(u(),m("img",{key:n,src:o,class:"uploaded-image w-20 h-20 object-cover rounded-md cursor-pointer transition-transform",onClick:r=>i.expandedImage=o},null,8,te))),128))])):g("",!0)])])]),t("div",se,[t("div",ae,[_(p,{comments:i.selectedTask.comments},null,8,["comments"])])])])])])):g("",!0),i.expandedImage?(u(),m("div",{key:1,class:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-75",style:{"z-index":"1050"},onClick:e[12]||(e[12]=o=>i.expandedImage=null)},[t("div",oe,[t("img",{src:i.expandedImage,class:"max-w-[90vw] max-h-[90vh] rounded-lg shadow-lg"},null,8,ie),t("button",{class:"absolute top-2 right-2 text-2xl",onClick:e[11]||(e[11]=v(o=>i.expandedImage=null,["stop"]))},"×")])])):g("",!0)])}const le=w(M,[["render",ne],["__scopeId","data-v-e7bcbe03"]]);export{le as default};
